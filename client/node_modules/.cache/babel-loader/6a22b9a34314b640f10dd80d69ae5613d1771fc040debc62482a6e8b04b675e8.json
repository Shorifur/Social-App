{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{Box}from'@mui/material';import{AuthContext}from'../context/AuthContext';import api from'../utils/api';import Post from'./Post';import Loading from'./Loading';// ‚¨ÖÔ∏è Import the loading spinner\nimport{jsx as _jsx}from\"react/jsx-runtime\";export default function PostList(){const{user}=useContext(AuthContext);const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);// ‚¨ÖÔ∏è Loading state\n// üåê Fetch posts on mount\nuseEffect(()=>{const fetchPosts=async()=>{try{const res=await api.get('/posts');setPosts(res.data);}catch(err){console.error('Error fetching posts:',err);}finally{setLoading(false);// ‚úÖ Done loading\n}};fetchPosts();},[]);// üîÅ Refresh posts after likes/comments\nconst refreshPosts=async()=>{try{const res=await api.get('/posts');setPosts(res.data);}catch(err){console.error('Error refreshing posts:',err);}};if(loading)return/*#__PURE__*/_jsx(Loading,{});// ‚¨ÖÔ∏è Show spinner while loading\nreturn/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:posts.map(post=>/*#__PURE__*/_jsx(Post,{post:post,currentUser:user,onInteraction:refreshPosts},post._id))});}","map":{"version":3,"names":["React","useEffect","useState","useContext","Box","AuthContext","api","Post","Loading","jsx","_jsx","PostList","user","posts","setPosts","loading","setLoading","fetchPosts","res","get","data","err","console","error","refreshPosts","sx","mt","children","map","post","currentUser","onInteraction","_id"],"sources":["C:/Users/shori/social-platform/client/src/components/PostList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { Box } from '@mui/material';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\nimport Post from './Post';\r\nimport Loading from './Loading'; // ‚¨ÖÔ∏è Import the loading spinner\r\n\r\nexport default function PostList() {\r\n  const { user } = useContext(AuthContext);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true); // ‚¨ÖÔ∏è Loading state\r\n\r\n  // üåê Fetch posts on mount\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const res = await api.get('/posts');\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching posts:', err);\r\n      } finally {\r\n        setLoading(false); // ‚úÖ Done loading\r\n      }\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  // üîÅ Refresh posts after likes/comments\r\n  const refreshPosts = async () => {\r\n    try {\r\n      const res = await api.get('/posts');\r\n      setPosts(res.data);\r\n    } catch (err) {\r\n      console.error('Error refreshing posts:', err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loading />; // ‚¨ÖÔ∏è Show spinner while loading\r\n\r\n  return (\r\n    <Box sx={{ mt: 2 }}>\r\n      {posts.map((post) => (\r\n        <Post \r\n          key={post._id} \r\n          post={post} \r\n          currentUser={user}\r\n          onInteraction={refreshPosts} \r\n        />\r\n      ))}\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,GAAG,KAAQ,eAAe,CACnC,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAO,CAAAC,GAAG,KAAM,cAAc,CAC9B,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAEjC,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,KAAM,CAAEC,IAAK,CAAC,CAAGT,UAAU,CAACE,WAAW,CAAC,CACxC,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAAE;AAE9C;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAZ,GAAG,CAACa,GAAG,CAAC,QAAQ,CAAC,CACnCL,QAAQ,CAACI,GAAG,CAACE,IAAI,CAAC,CACpB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC7C,CAAC,OAAS,CACRL,UAAU,CAAC,KAAK,CAAC,CAAE;AACrB,CACF,CAAC,CACDC,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAO,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAN,GAAG,CAAG,KAAM,CAAAZ,GAAG,CAACa,GAAG,CAAC,QAAQ,CAAC,CACnCL,QAAQ,CAACI,GAAG,CAACE,IAAI,CAAC,CACpB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC/C,CACF,CAAC,CAED,GAAIN,OAAO,CAAE,mBAAOL,IAAA,CAACF,OAAO,GAAE,CAAC,CAAE;AAEjC,mBACEE,IAAA,CAACN,GAAG,EAACqB,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,CAChBd,KAAK,CAACe,GAAG,CAAEC,IAAI,eACdnB,IAAA,CAACH,IAAI,EAEHsB,IAAI,CAAEA,IAAK,CACXC,WAAW,CAAElB,IAAK,CAClBmB,aAAa,CAAEP,YAAa,EAHvBK,IAAI,CAACG,GAIX,CACF,CAAC,CACC,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}