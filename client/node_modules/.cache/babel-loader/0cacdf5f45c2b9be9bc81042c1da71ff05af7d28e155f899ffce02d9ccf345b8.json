{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shori\\\\social-platform\\\\client\\\\src\\\\components\\\\Post.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Card, CardHeader, CardContent, CardMedia, Typography, IconButton, Avatar, Box, Divider } from '@mui/material';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport CommentIcon from '@mui/icons-material/Comment';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport { formatDistanceToNow } from 'date-fns';\nimport { AuthContext } from '../context/AuthContext';\nimport { motion } from 'framer-motion';\nimport socket from '../utils/socket'; // Import your socket instance\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Post({\n  post\n}) {\n  _s();\n  var _post$likes, _post$comments;\n  const {\n    user\n  } = useContext(AuthContext);\n  const [likes, setLikes] = useState(((_post$likes = post.likes) === null || _post$likes === void 0 ? void 0 : _post$likes.length) || 0);\n  const [isLiked, setIsLiked] = useState(false);\n  const handleLike = () => {\n    setLikes(isLiked ? likes - 1 : likes + 1);\n    setIsLiked(!isLiked);\n\n    // Emit the like event to the server\n    socket.emit('like-post', {\n      postId: post._id,\n      userId: user._id\n    });\n\n    // Optionally, call your backend API here to persist like\n  };\n  useEffect(() => {\n    // Listen for like updates from the server\n    socket.on('post-liked', ({\n      postId,\n      likesCount\n    }) => {\n      if (postId === post._id) {\n        setLikes(likesCount);\n      }\n    });\n\n    // Cleanup on unmount\n    return () => {\n      socket.off('post-liked');\n    };\n  }, [post._id]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      mb: 3,\n      borderRadius: '20px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      backdropFilter: 'blur(10px)',\n      border: '1px solid rgba(255, 255, 255, 0.2)',\n      boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        src: post.user.avatar || '/default-avatar.png'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this),\n      title: post.user.username,\n      subheader: formatDistanceToNow(new Date(post.createdAt), {\n        addSuffix: true\n      }),\n      action: /*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this),\n      sx: {\n        pb: 0\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n      component: \"img\",\n      height: \"500\",\n      image: post.image || '/placeholder.jpg',\n      sx: {\n        borderRadius: '15px',\n        m: 2,\n        boxShadow: '4px 4px 8px #ccc, -4px -4px 8px #fff'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        sx: {\n          mb: 2\n        },\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          my: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 2,\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(motion.span, {\n          onClick: handleLike,\n          whileTap: {\n            scale: 1.5\n          },\n          animate: {\n            scale: isLiked ? [1, 1.2, 1] : 1\n          },\n          style: {\n            display: 'inline-block',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n            color: isLiked ? 'error' : 'disabled'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          children: likes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          children: /*#__PURE__*/_jsxDEV(CommentIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          children: ((_post$comments = post.comments) === null || _post$comments === void 0 ? void 0 : _post$comments.length) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Post, \"8A6WYWVhL0+REH/dbfwEvILXWm8=\");\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useContext","useEffect","Card","CardHeader","CardContent","CardMedia","Typography","IconButton","Avatar","Box","Divider","FavoriteIcon","CommentIcon","MoreVertIcon","formatDistanceToNow","AuthContext","motion","socket","jsxDEV","_jsxDEV","Post","post","_s","_post$likes","_post$comments","user","likes","setLikes","length","isLiked","setIsLiked","handleLike","emit","postId","_id","userId","on","likesCount","off","sx","mb","borderRadius","background","backdropFilter","border","boxShadow","children","avatar","src","fileName","_jsxFileName","lineNumber","columnNumber","title","username","subheader","Date","createdAt","addSuffix","action","pb","component","height","image","m","variant","content","my","display","gap","alignItems","span","onClick","whileTap","scale","animate","style","cursor","color","comments","_c","$RefreshReg$"],"sources":["C:/Users/shori/social-platform/client/src/components/Post.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardContent,\r\n  CardMedia,\r\n  Typography,\r\n  IconButton,\r\n  Avatar,\r\n  Box,\r\n  Divider\r\n} from '@mui/material';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport CommentIcon from '@mui/icons-material/Comment';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { motion } from 'framer-motion';\r\nimport socket from '../utils/socket'; // Import your socket instance\r\n\r\nfunction Post({ post }) {\r\n  const { user } = useContext(AuthContext);\r\n  const [likes, setLikes] = useState(post.likes?.length || 0);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n\r\n  const handleLike = () => {\r\n    setLikes(isLiked ? likes - 1 : likes + 1);\r\n    setIsLiked(!isLiked);\r\n\r\n    // Emit the like event to the server\r\n    socket.emit('like-post', { postId: post._id, userId: user._id });\r\n\r\n    // Optionally, call your backend API here to persist like\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Listen for like updates from the server\r\n    socket.on('post-liked', ({ postId, likesCount }) => {\r\n      if (postId === post._id) {\r\n        setLikes(likesCount);\r\n      }\r\n    });\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      socket.off('post-liked');\r\n    };\r\n  }, [post._id]);\r\n\r\n  return (\r\n    <Card\r\n      sx={{\r\n        mb: 3,\r\n        borderRadius: '20px',\r\n        background: 'rgba(255, 255, 255, 0.7)',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.2)',\r\n        boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <CardHeader\r\n        avatar={<Avatar src={post.user.avatar || '/default-avatar.png'} />}\r\n        title={post.user.username}\r\n        subheader={formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\r\n        action={<IconButton><MoreVertIcon /></IconButton>}\r\n        sx={{ pb: 0 }}\r\n      />\r\n\r\n      {/* Media */}\r\n      <CardMedia\r\n        component=\"img\"\r\n        height=\"500\"\r\n        image={post.image || '/placeholder.jpg'}\r\n        sx={{\r\n          borderRadius: '15px',\r\n          m: 2,\r\n          boxShadow: '4px 4px 8px #ccc, -4px -4px 8px #fff',\r\n        }}\r\n      />\r\n\r\n      {/* Content */}\r\n      <CardContent>\r\n        <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n          {post.content}\r\n        </Typography>\r\n\r\n        <Divider sx={{ my: 2 }} />\r\n\r\n        {/* Actions */}\r\n        <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\r\n          <motion.span\r\n            onClick={handleLike}\r\n            whileTap={{ scale: 1.5 }}\r\n            animate={{ scale: isLiked ? [1, 1.2, 1] : 1 }}\r\n            style={{ display: 'inline-block', cursor: 'pointer' }}\r\n          >\r\n            <FavoriteIcon color={isLiked ? 'error' : 'disabled'} />\r\n          </motion.span>\r\n          <Typography>{likes}</Typography>\r\n          <IconButton>\r\n            <CommentIcon />\r\n          </IconButton>\r\n          <Typography>{post.comments?.length || 0}</Typography>\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}