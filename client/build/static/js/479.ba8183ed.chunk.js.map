{"version":3,"file":"static/js/479.ba8183ed.chunk.js","mappings":"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","sources":["pages/Dashboard.js","utils/socket.js","components/Post.js","components/Loading.js","components/PostList.js"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport Skeleton from '@mui/material/Skeleton';\r\nimport PostList from '../components/PostList';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nfunction Dashboard() {\r\n  const { loading = false } = useContext(AuthContext) || {};\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      {loading ? (\r\n        <Skeleton\r\n          variant=\"rectangular\"\r\n          width={500}\r\n          height={300}\r\n          animation=\"wave\"\r\n          sx={{ borderRadius: 2 }}\r\n        />\r\n      ) : (\r\n        <PostList />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","import { io } from 'socket.io-client';\r\n\r\nconst socket = io('http://localhost:5000', {\r\n  autoConnect: false // Connect manually after auth\r\n});\r\n\r\nexport const connectSocket = (token) => {\r\n  socket.auth = { token };\r\n  socket.connect();\r\n};\r\n\r\nexport default socket;","import React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardContent,\r\n  CardMedia,\r\n  Typography,\r\n  IconButton,\r\n  Avatar,\r\n  Box,\r\n  Divider,\r\n  TextField,\r\n  Button\r\n} from '@mui/material';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport CommentIcon from '@mui/icons-material/Comment';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { motion } from 'framer-motion';\r\nimport socket from '../utils/socket';\r\n\r\nfunction Post({ post }) {\r\n  const { user } = useContext(AuthContext);\r\n  const [likes, setLikes] = useState(post.likes?.length || 0);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [commentText, setCommentText] = useState('');\r\n\r\n  const handleLike = () => {\r\n    setLikes(isLiked ? likes - 1 : likes + 1);\r\n    setIsLiked(!isLiked);\r\n\r\n    // Emit the like event to the server\r\n    socket.emit('like-post', { postId: post._id, userId: user._id });\r\n  };\r\n\r\n  const handleComment = () => {\r\n    if (!commentText.trim()) return;\r\n\r\n    // 🔔 Emit a notification to the post author\r\n    socket.emit('send-notification', {\r\n      userId: post.user._id, // author of the post\r\n      message: `${user.username} commented on your post`\r\n    });\r\n\r\n    // TODO: Call backend API to save comment\r\n    setCommentText('');\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on('post-liked', ({ postId, likesCount }) => {\r\n      if (postId === post._id) {\r\n        setLikes(likesCount);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.off('post-liked');\r\n    };\r\n  }, [post._id]);\r\n\r\n  return (\r\n    <Card\r\n      sx={{\r\n        mb: 3,\r\n        borderRadius: '20px',\r\n        background: 'rgba(255, 255, 255, 0.7)',\r\n        backdropFilter: 'blur(10px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.2)',\r\n        boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\r\n      }}\r\n    >\r\n      <CardHeader\r\n        avatar={<Avatar src={post.user.avatar || '/default-avatar.png'} />}\r\n        title={post.user.username}\r\n        subheader={formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\r\n        action={<IconButton><MoreVertIcon /></IconButton>}\r\n        sx={{ pb: 0 }}\r\n      />\r\n\r\n      <CardMedia\r\n        component=\"img\"\r\n        height=\"500\"\r\n        image={post.image || '/placeholder.jpg'}\r\n        sx={{\r\n          borderRadius: '15px',\r\n          m: 2,\r\n          boxShadow: '4px 4px 8px #ccc, -4px -4px 8px #fff',\r\n        }}\r\n      />\r\n\r\n      <CardContent>\r\n        <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n          {post.content}\r\n        </Typography>\r\n\r\n        <Divider sx={{ my: 2 }} />\r\n\r\n        <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\r\n          <motion.span\r\n            onClick={handleLike}\r\n            whileTap={{ scale: 1.5 }}\r\n            animate={{ scale: isLiked ? [1, 1.2, 1] : 1 }}\r\n            style={{ display: 'inline-block', cursor: 'pointer' }}\r\n          >\r\n            <FavoriteIcon color={isLiked ? 'error' : 'disabled'} />\r\n          </motion.span>\r\n          <Typography>{likes}</Typography>\r\n          <IconButton>\r\n            <CommentIcon />\r\n          </IconButton>\r\n          <Typography>{post.comments?.length || 0}</Typography>\r\n        </Box>\r\n\r\n        {/* Comment Input Box */}\r\n        <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            placeholder=\"Write a comment...\"\r\n            value={commentText}\r\n            onChange={(e) => setCommentText(e.target.value)}\r\n          />\r\n          <Button variant=\"contained\" onClick={handleComment}>Send</Button>\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n","import { PulseLoader } from 'react-spinners';\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <div className=\"loading-overlay\">\r\n      <PulseLoader color=\"#36d7b7\" size={15} />\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Box } from '@mui/material';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\nimport Post from './Post';\r\nimport Loading from './Loading'; // ⬅️ Import the loading spinner\r\n\r\nexport default function PostList() {\r\n  const { user } = useContext(AuthContext);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true); // ⬅️ Loading state\r\n\r\n  // 🌐 Fetch posts on mount\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const res = await api.get('/posts');\r\n        setPosts(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching posts:', err);\r\n      } finally {\r\n        setLoading(false); // ✅ Done loading\r\n      }\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  // 🔁 Refresh posts after likes/comments\r\n  const refreshPosts = async () => {\r\n    try {\r\n      const res = await api.get('/posts');\r\n      setPosts(res.data);\r\n    } catch (err) {\r\n      console.error('Error refreshing posts:', err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loading />; // ⬅️ Show spinner while loading\r\n\r\n  return (\r\n    <Box sx={{ mt: 2 }}>\r\n      {posts.map((post) => (\r\n        <Post \r\n          key={post._id} \r\n          post={post} \r\n          currentUser={user}\r\n          onInteraction={refreshPosts} \r\n        />\r\n      ))}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["loading","useContext","AuthContext","_jsx","style","padding","children","Skeleton","variant","width","height","animation","sx","borderRadius","PostList","socket","io","autoConnect","_ref","_post$likes","_post$comments","post","user","likes","setLikes","useState","length","isLiked","setIsLiked","commentText","setCommentText","useEffect","on","_ref2","postId","likesCount","_id","off","_jsxs","Card","mb","background","backdropFilter","border","boxShadow","CardHeader","avatar","Avatar","src","title","username","subheader","formatDistanceToNow","Date","createdAt","addSuffix","action","IconButton","MoreVertIcon","pb","CardMedia","component","image","m","CardContent","Typography","content","Divider","my","Box","display","gap","alignItems","motion","span","onClick","handleLike","emit","userId","whileTap","scale","animate","cursor","FavoriteIcon","color","CommentIcon","comments","mt","TextField","fullWidth","size","placeholder","value","onChange","e","target","Button","handleComment","trim","message","Loading","className","PulseLoader","posts","setPosts","setLoading","async","res","api","get","data","err","console","error","fetchPosts","refreshPosts","map","Post","currentUser","onInteraction"],"sourceRoot":""}